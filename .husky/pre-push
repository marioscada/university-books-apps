#!/bin/sh

branch=$(git rev-parse --abbrev-ref HEAD)

# Allow master branch
if [ "$branch" = "master" ]; then
  exit 0
fi

# Check branch naming convention: feat|fix|refactor/cicd-test/branch-name
if ! echo "$branch" | grep -qE "^(feat|fix|refactor)/cicd-test/"; then
  echo "Error: Branch name must follow pattern: feat|fix|refactor/cicd-test/branch-name"
  echo "Current branch: $branch"
  echo ""
  echo "Examples:"
  echo "  feat/cicd-test/add-login"
  echo "  fix/cicd-test/button-color"
  echo "  refactor/cicd-test/cleanup-code"
  exit 1
fi

exit 0
